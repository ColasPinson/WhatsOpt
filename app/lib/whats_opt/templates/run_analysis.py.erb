import openmdao.api as om
from run_parameters_init import initialize
<% if @egmdo %>
from <%= @egmdo_module %>.<%= @mda.py_modulename %>_egmda import <%= @mda.py_classname %>Egmda as <%= @mda.py_classname %>
<%- if @remote -%>
from <%= @server_module %>.<%= @mda.py_modulename %>_proxy import <%= @mda.py_classname %>Proxy
<% end %>
<% elsif @remote -%>
from <%= @server_module %>.<%= @mda.py_modulename %>_proxy import <%= @mda.py_classname %>Proxy as <%= @mda.py_classname %>
<% else -%>
from <%= @mda.py_modulename %> import <%= @mda.py_classname %>
<% end -%>
<%- if @egmdo -%>
from optparse import OptionParser

parser = OptionParser()
parser.add_option("--plot",
                  action="store_true", dest="plot", default=False,
                  help="Display scatter plots outputs vs inputs")
(options, args) = parser.parse_args()

# Options: n_doe_pce=500, epsilon_coeff_var=1e-3, n_iter_max=10, plot_range=[0, 50]
<%- if @remote -%>
pb = om.Problem(<%= @mda.py_classname %>(discipline_factory=<%= @mda.py_classname %>Proxy(), plot=options.plot))
<%- else -%>
pb = om.Problem(<%= @mda.py_classname %>(plot=options.plot))
<%- end -%>
<% else %>
pb = om.Problem(<%= @mda.py_classname %>())
<%- end -%>
pb.setup()
initialize(pb)

pb.run_model()
pb.model.list_inputs(print_arrays=False)
pb.model.list_outputs(print_arrays=False)
